primary: &primary
  adapter: postgresql
  encoding: unicode
  # For details on connection pooling, see Rails configuration guide
  # https://guides.rubyonrails.org/configuring.html#database-pooling
  pool: <%= [ENV.fetch("RAILS_MAX_THREADS", 25).to_i, ENV.fetch("SIDEKIQ_CONCURRENCY", 10).to_i].max %>
  <% if ENV["DATABASE_URL"].present? %>url: <%= ENV["DATABASE_URL"] %><% end %>

development:
  primary:
    <<: *primary
    database: app_development

test:
  primary:
    <<: *primary
    database: app_test

production:
  primary:
    <<: *primary
    database: app_production
